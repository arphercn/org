<!DOCTYPE html>
<html>
<head>
   <title></title>

</head>
<body style="position: relative;">

<input type="button" value="myBtn" id="myBtn">

<div id="message" style="visibility: hidden;">hello world</div>

<div id="myDiv" style="left:0;top:40px; position:absolute;width: 200px;height: 200px;background-color: red;"></div>
<script type="text/javascript" src="function.js"></script>
<script type="text/javascript" src="json2.js"></script>

<script type="text/javascript">

// 22.3 高级定时器

/*
    var btn = document.getElementById("myBtn"); 
    btn.onclick = function(){ 
        setTimeout(function(){  
            document.getElementById("message").style.visibility = "visible"; 
        }, 250); 
     
        //其他代码 
    };
*/

// 22.3.1 重复的定时器

/*
    setTimeout(function(){ 
     
        var div = document.getElementById("myDiv"); 
        left = parseInt(div.style.left) + 2; 
        div.style.left = left + "px"; 
     
        if (left < 200){
            setTimeout(arguments.callee, 10); 
        } 
     
    }, 1000);        
*/

// 22.3.2 Yielding Processes  数组分块（array chunking）的技术

    // 当你发现某个循环占用了大量时间...
/*
    function chunk(array, process, context){ 
        setTimeout(function(){ 
            var item = array.shift(); 
            process.call(context, item); 
     
            if (array.length > 0){ 
                setTimeout(arguments.callee, 100); 
            } 
        }, 100); 
    }    

    var data = [12,123,1234,453,436,23,23,5,4123,45,346,5634,2234,345,342]; 
     
    function printValue(item){ 
        var div = document.getElementById("myDiv"); 
        div.innerHTML += item + "<br>"; 
    } 
     
    chunk(data, printValue);
*/

// 22.3.3 函数节流


    // ...


// 22.4 自定义事件

/*
    function EventTarget(){ 
        this.handlers = {}; 
    } 
     
    EventTarget.prototype = { 
        
        constructor: EventTarget, 
        
        addHandler: function(type, handler){ 
            if (typeof this.handlers[type] == "undefined"){ 
                this.handlers[type] = []; 
            } 
     
            this.handlers[type].push(handler); 
        }, 
     
        fire: function(event){ 
            if (!event.target){ 
                event.target = this; 
            } 
            if (this.handlers[event.type] instanceof Array){ 
                var handlers = this.handlers[event.type]; 
                for (var i=0, len=handlers.length; i < len; i++){ 
                    handlers[i](event); 
                } 
            } 
        }, 
     
        removeHandler: function(type, handler){ 
            if (this.handlers[type] instanceof Array){ 
                var handlers = this.handlers[type]; 
                for (var i=0, len=handlers.length; i < len; i++){ 
                    if (handlers[i] === handler){ 
                        break; 
                    } 
                } 
     
                handlers.splice(i, 1);
            } 
        } 
    };            


    function handleMessage(event){ 
        alert("Message received: " + event.message); 
    } 
     
    //创建一个新对象 
    var target = new EventTarget(); 
     
    //添加一个事件处理程序 
    target.addHandler("message", handleMessage); 
     
    //触发事件 
    target.fire({ type: "message", message: "Hello world!"}); 
     
    // //删除事件处理程序 
    target.removeHandler("message", handleMessage); 
     
    // //再次，应没有处理程序 
    target.fire({ type: "message", message: "Hello world!"});
*/

// 22.5 拖放 










</script>
</body>
</html>